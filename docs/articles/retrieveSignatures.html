<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="SigRepo">
<title>Retrieve Signatures • SigRepo</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Retrieve Signatures">
<meta property="og:description" content="SigRepo">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">SigRepo</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-docker-installation">Docker Installation</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-docker-installation">
    <a class="dropdown-item" href="../articles/install-sigrepo_locally.html">Install SigRepo Locally via Docker</a>
    <a class="dropdown-item" href="../articles/install-sigrepo-externally.html">Install SigRepo on the Server via Docker</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-documentation">Documentation</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-documentation">
    <a class="dropdown-item" href="../articles/signature-tutorials.html">Uploading Signature</a>
    <a class="dropdown-item" href="../articles/collection-tutorials.html">Uploading Signature Collection</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Change Log</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/montilab/SigRepo">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Retrieve Signatures</h1>
                        <h4 data-toc-skip class="author">Callen
Bragdon</h4>
            
            <h4 data-toc-skip class="date">4/6/2021</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/montilab/SigRepo/blob/HEAD/vignettes/retrieveSignatures.Rmd" class="external-link"><code>vignettes/retrieveSignatures.Rmd</code></a></small>
      <div class="d-none name"><code>retrieveSignatures.Rmd</code></div>
    </div>

    
    
<p>If you haven’t installed <code>SigRepoR</code> yet, please contact <a href="mailto:vmli@bu.edu" class="email">vmli@bu.edu</a> for
instruction.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/load_all.html" class="external-link">load_all</a></span><span class="op">(</span><span class="st">"."</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="configuration">Configuration<a class="anchor" aria-label="anchor" href="#configuration"></a>
</h2>
<p>SigRepoR interacts with servers that are(possibly) not on your
current working computer. Therefor, Before proceeding with uploading
signatures, it’s important that you first configure your session to
point to which database to upload to, along with where to write files to
in your file system.</p>
<pre><code><span><span class="fu">configureSigRepo</span><span class="op">(</span></span>
<span>    <span class="co"># Where do the OmicSignatures live in the server's fileSystem?</span></span>
<span>    signatureDirectory<span class="op">=</span></span>
<span>        <span class="st">"/opt/shiny-server/challenge_project/miscellanea/signatures/"</span>,</span>
<span>    databaseServer<span class="op">=</span><span class="st">"sigrepo.bu.edu"</span>, <span class="co"># Where's the database?</span></span>
<span>    databasePort<span class="op">=</span><span class="st">"4253"</span>, <span class="co"># What port is the database server using?</span></span>
<span>    applicationPort<span class="op">=</span><span class="st">""</span>,</span>
<span>    signatureServer<span class="op">=</span><span class="st">"sigrepo.bu.edu"</span> <span class="co"># What server has the OmicSignatures?</span></span>
<span><span class="op">)</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="retrieve-signatures">Retrieve Signatures<a class="anchor" aria-label="anchor" href="#retrieve-signatures"></a>
</h2>
<p>Now, we can retrieve signatures in a few ways</p>
<div class="section level3">
<h3 id="getsignatures">getSignatures()<a class="anchor" aria-label="anchor" href="#getsignatures"></a>
</h3>
<p>this function returns a named list</p>
<ul>
<li><p>metadata: containing general information for each
signature</p></li>
<li><p>level2: if requested, will have the level2 signature
representation for all signatures</p></li>
</ul>
<p>you can get signatures based on a list of signature names, but for
more granular queries, you can use sqlFindingQuery()</p>
</div>
<div class="section level3">
<h3 id="sqlfindingquery">sqlFindingQuery<a class="anchor" aria-label="anchor" href="#sqlfindingquery"></a>
</h3>
<p>You can use <code>sqlFindingQuery</code> to query your SQL database
of interest without prior knowledge of SQL.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># gets general metadata for signatures</span></span>
<span><span class="co"># </span></span>
<span><span class="va">exampleSignatures</span> <span class="op">&lt;-</span> <span class="fu">sqlFindingQuery</span><span class="op">(</span></span>
<span>    <span class="st">"signature_view"</span>,</span>
<span>    fields<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"signature_name"</span><span class="op">)</span>,</span>
<span>    <span class="co"># Now for the query</span></span>
<span>    <span class="co"># Here I just want human signatures</span></span>
<span>    ins<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        <span class="st">"species"</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Homo sapiens"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>If you want to grab level2 data with this function, you can either
make your query from scratch, or pass more complex “subqueries” based on
other search critera</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sqlFindingQuery</span><span class="op">(</span></span>
<span>    <span class="st">"feature_signature_view"</span>,</span>
<span>    ins <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        <span class="st">"signature_name"</span> <span class="op">=</span> <span class="fu">sqlFindingQuery</span><span class="op">(</span></span>
<span>            <span class="st">"signature_view"</span>,</span>
<span>            fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"signature_name"</span><span class="op">)</span>,</span>
<span>            <span class="co"># Now for the query</span></span>
<span>            <span class="co"># Here I just want human signatures</span></span>
<span>            ins <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"species"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Homo sapiens"</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="op">)</span><span class="op">$</span><span class="va">signature_name</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sqlFindingQuery</span><span class="op">(</span></span>
<span>    <span class="st">"feature_signature_view"</span>,</span>
<span>    ins <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        <span class="st">"signature_name"</span> <span class="op">=</span> <span class="va">exampleSignatures</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="retrieve-other-information">Retrieve Other Information<a class="anchor" aria-label="anchor" href="#retrieve-other-information"></a>
</h2>
<p>Perhaps the most helpful tools for starting out, if you are not
familiar with your database setup, are <code>getTables</code> and
<code>getTableFields</code></p>
<div class="section level3">
<h3 id="database-information">Database Information<a class="anchor" aria-label="anchor" href="#database-information"></a>
</h3>
<p><code>getTables</code> will list all the tables and views of the
database</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">getTables</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>If you want to know what fields are in a given table, which is
helpful for removing fields you may not want to query,
<code>getTableFields(tableName)</code> lists out all the fields for that
given table, along with their datatypes</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">getTableFields</span><span class="op">(</span><span class="st">"signature_view"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="platforms">Platforms<a class="anchor" aria-label="anchor" href="#platforms"></a>
</h3>
<p><code>getAssayPlatforms()</code> gets all the assay platforms that
exist on the SigRepo DB instance you’re pointing to.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">getAssayPlatforms</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="level-2-representation">Level 2 Representation<a class="anchor" aria-label="anchor" href="#level-2-representation"></a>
</h3>
<p>If you just want the level 2 representation of your signatures of
interest, <code>getLevel2</code> will do that for you. It’s essentially
a wrapper for <code>sqlFindingQuery</code> but pointing to the
feature_view table in the database.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">getLevel2</span><span class="op">(</span></span>
<span>    insList<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        <span class="st">"same_structure"</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"As the ins parameter in sqlFindingQuery"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>for each signature-feature pair, you’ll get the name of the feature,
the score, and the direction.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/RC-88" class="external-link">Reina Chau</a>, <a href="https://github.com/Cvicnaire" class="external-link">Cameron Vicnaire</a>, Mengze Li, <a href="https://github.com/tetomonti" class="external-link">Stefano Monti</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
